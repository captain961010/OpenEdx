"use strict";(globalThis.webpackChunk_edx_frontend_app_discussions=globalThis.webpackChunk_edx_frontend_app_discussions||[]).push([[466],{10908:(e,s,r)=>{r.d(s,{Z:()=>t});const t=(0,r(93477).vU)({reported:{id:"discussions.learner.reported",defaultMessage:"{reported} reported"},previouslyReported:{id:"discussions.learner.previouslyReported",defaultMessage:"{previouslyReported} previously reported"},lastActive:{id:"discussions.learner.lastLogin",defaultMessage:"Last active {lastActiveTime}"},loadMore:{id:"discussions.learner.loadMostLearners",defaultMessage:"Load more",description:"Text on button for loading more learners"},back:{id:"discussions.learner.back",defaultMessage:"Back",description:"Text on button for back to learners list"},activityForLearner:{id:"discussions.learner.activityForLearner",defaultMessage:"Activity for {username}",description:"Text for learners post header"},mostActivity:{id:"discussions.learner.mostActivity",defaultMessage:"Most activity",description:"Text for learners sorting by most activity"},reportedActivity:{id:"discussions.learner.reportedActivity",defaultMessage:"Reported activity",description:"Text for learners sorting by reported activity"},recentActivity:{id:"discussions.learner.recentActivity",defaultMessage:"Recent activity",description:"Text for learners sorting by recent activity"},sortFilterStatus:{id:"discussions.learner.sortFilterStatus",defaultMessage:"All learners sorted by {sort, select,\n      flagged {reported activity}\n      activity {most activity}\n      other {{sort}}\n    }",description:"Text for current selected learners filter"},allActivity:{id:"discussion.learner.allActivity",defaultMessage:"All activity",description:"Tooltip text for all activity icon"},posts:{id:"discussion.learner.posts",defaultMessage:"Posts",description:"Tooltip text for all posts icon"}})},84466:(e,s,r)=>{r.r(s),r.d(s,{default:()=>W});var t=r(89526),i=r(48446),a=r(65092),l=r(59458),n=r(86009),o=r(25180),c=r(96419),d=r(29519),u=r(43494),m=r(51873);const p=(0,r(13806).P1)((e=>e.learners.pages),(e=>e.flat()));var x=r(32516),v=r(64660),f=r(565),g=r(57983),y=r(1987),h=r(2652),b=r.n(h),j=r(67740),S=r(67557);const Z=e=>{let{username:s}=e;return(0,S.jsx)("div",{className:"mr-3 mt-1",children:(0,S.jsx)(j.Z,{size:"sm",alt:s,style:{height:"2rem",width:"2rem"}})})};Z.propTypes={username:b().string.isRequired};const N=t.memo(Z);var M=r(17566),O=r(19012),T=r(99912),C=r(90244),F=r(61646),A=r(10908);const P=e=>{let{inactiveFlags:s,activeFlags:r,threads:t,responses:a,replies:n,username:o}=e;const c=(0,l.Z)(),d=(0,i.v9)(u.hJ),m=(0,i.v9)(u.bK),p=(r||s)&&(d||m);return(0,S.jsxs)("div",{className:"d-flex align-items-center pt-1 mt-2.5",style:{marginBottom:"2px"},children:[(0,S.jsx)(M.O,{placement:"right",id:`learner-${o}-responses`,overlay:(0,S.jsx)(O.Z,{id:`learner-${o}-responses`,children:(0,S.jsx)("div",{className:"d-flex flex-column align-items-start",children:c.formatMessage(A.Z.allActivity)})}),children:(0,S.jsxs)("div",{className:"d-flex align-items-center",children:[(0,S.jsx)(T.Z,{src:F.cM,className:"icon-size mr-2"}),t+a+n]})}),(0,S.jsx)(M.O,{placement:"right",id:`learner-${o}-posts`,overlay:(0,S.jsx)(O.Z,{id:`learner-${o}-posts`,children:(0,S.jsx)("div",{className:"d-flex flex-column align-items-start",children:c.formatMessage(A.Z.posts)})}),children:(0,S.jsxs)("div",{className:"d-flex align-items-center",children:[(0,S.jsx)(T.Z,{src:C.I8b,className:"icon-size mr-2 ml-4"}),t]})}),Boolean(p)&&(0,S.jsx)(M.O,{placement:"right",id:`learner-${o}-flags`,overlay:(0,S.jsx)(O.Z,{id:`learner-${o}-flags`,children:(0,S.jsxs)("div",{className:"d-flex flex-column align-items-start",children:[Boolean(r)&&(0,S.jsx)("span",{children:c.formatMessage(A.Z.reported,{reported:r})}),Boolean(s)&&(0,S.jsx)("span",{children:c.formatMessage(A.Z.previouslyReported,{previouslyReported:s})})]})}),children:(0,S.jsxs)("div",{className:"d-flex align-items-center",children:[(0,S.jsx)(T.Z,{src:r?C.yGN:C.BlP,className:"icon-size mr-2 ml-4 text-danger"}),r," ",Boolean(s)&&`/ ${s}`]})})]})};P.propTypes={inactiveFlags:b().number,activeFlags:b().number,threads:b().number,responses:b().number,replies:b().number,username:b().string},P.defaultProps={inactiveFlags:0,activeFlags:0,threads:0,responses:0,replies:0,username:""};const w=t.memo(P),R=b().shape({activeFlags:b().number,inactiveFlags:b().number,username:b().string,replies:b().number,responses:b().number,threads:b().number}),E=e=>{let{learner:s}=e;const{username:r,threads:i,inactiveFlags:a,activeFlags:l,responses:n,replies:o}=s,{enableInContextSidebar:c,learnerUsername:u,courseId:m}=(0,t.useContext)(g.H),p=(0,y.uu)(d.Z5.LEARNERS.POSTS,{0:c?"in-context":void 0,learnerUsername:s.username,courseId:m});return(0,S.jsx)(f.rU,{className:"discussion-post p-0 text-decoration-none text-gray-900 border-bottom border-light-400",to:p,children:(0,S.jsxs)("div",{className:"d-flex flex-row flex-fill mw-100 py-3 px-4 border-primary-500",style:r===u?{borderRightWidth:"4px",borderRightStyle:"solid"}:null,children:[(0,S.jsx)(N,{username:r}),(0,S.jsx)("div",{className:"d-flex flex-column flex-fill",style:{minWidth:0},children:(0,S.jsxs)("div",{className:"d-flex flex-column justify-content-start mw-100 flex-fill",children:[(0,S.jsx)("div",{className:"d-flex align-items-center flex-fill",children:(0,S.jsx)("div",{className:"text-truncate font-weight-500 font-size-14 text-primary-500 font-style",children:r})}),null!==i&&(0,S.jsx)(w,{inactiveFlags:a,activeFlags:l,threads:i,responses:n,replies:o,username:r})]})})]})})};E.propTypes={learner:R.isRequired};const B=t.memo(E);var k=r(64403),I=r.n(k),U=r(86615),_=r(99638),L=r(84387),z=r(50880);const $=t.memo((e=>{let{id:s,label:r,value:t,selected:i}=e;return(0,S.jsxs)("label",{htmlFor:s,className:"focus border-bottom-0 d-flex align-items-center w-100 py-2 m-0 font-weight-500 filter-menu","data-testid":t===i?`${t} selected`:null,style:{cursor:"pointer"},"aria-checked":t===i,tabIndex:t===i?"0":"-1",children:[(0,S.jsx)(T.Z,{src:C.JrY,className:I()("text-success mr-2",{invisible:t!==i})}),(0,S.jsx)(_.ZP.Radio,{id:s,className:"sr-only sr-only-focusable",value:t,tabIndex:"0",children:r}),(0,S.jsx)("span",{"aria-hidden":!0,className:"text-truncate",children:r})]})}));$.propTypes={id:b().string.isRequired,label:b().string.isRequired,value:b().string.isRequired,selected:b().string.isRequired};const K=()=>{const e=(0,l.Z)(),s=(0,i.I0)(),r=(0,i.v9)(u.hJ),a=(0,i.v9)(u.bK),n=(0,i.v9)((e=>e.learners.sortedBy)),[o,c]=(0,t.useState)(!1),m=(0,t.useCallback)((e=>{const{name:r,value:t}=e.currentTarget;"sort"===r&&(s((0,z.WS)(t)),(0,U.hC)("edx.forum.sort.user",{sort:t}))}),[]),p=(0,t.useCallback)((()=>{c(!o)}),[o]);return(0,S.jsxs)(L.Z.Advanced,{open:o,onToggle:p,className:"filter-bar collapsible-card-lg border-0",children:[(0,S.jsxs)(L.Z.Trigger,{className:"collapsible-trigger border-0",children:[(0,S.jsx)("span",{className:"text-primary-700 pr-4",children:e.formatMessage(A.Z.sortFilterStatus,{sort:n})}),(0,S.jsx)(L.Z.Visible,{whenClosed:!0,children:(0,S.jsx)(T.Z,{src:C.KWz})}),(0,S.jsx)(L.Z.Visible,{whenOpen:!0,children:(0,S.jsx)(T.Z,{src:C.KWz})})]}),(0,S.jsx)(L.Z.Body,{className:"collapsible-body px-4 pb-3 pt-0",children:(0,S.jsx)(_.ZP,{children:(0,S.jsx)("div",{className:"d-flex flex-row py-2 justify-content-between",children:(0,S.jsxs)(_.ZP.RadioSet,{name:"sort",className:"d-flex flex-column list-group list-group-flush",value:n,onChange:m,children:[(0,S.jsx)($,{id:"sort-activity",label:e.formatMessage(A.Z.mostActivity),value:d.gK.BY_LAST_ACTIVITY,selected:n}),(r||a)&&(0,S.jsx)($,{id:"sort-reported",label:e.formatMessage(A.Z.reportedActivity),value:d.gK.BY_FLAG,selected:n}),(0,S.jsx)($,{id:"sort-recency",label:e.formatMessage(A.Z.recentActivity),value:d.gK.BY_RECENCY,selected:n})]})})})})]})};function Y(e,s){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);s&&(t=t.filter((function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable}))),r.push.apply(r,t)}return r}function q(e){for(var s=1;s<arguments.length;s++){var r=null!=arguments[s]?arguments[s]:{};s%2?Y(Object(r),!0).forEach((function(s){D(e,s,r[s])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Y(Object(r)).forEach((function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))}))}return e}function D(e,s,r){return(s=function(e){var s=function(e,s){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var t=r.call(e,"string");if("object"!=typeof t)return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof s?s:String(s)}(s))in e?Object.defineProperty(e,s,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[s]=r,e}const W=()=>{const e=(0,l.Z)(),{courseId:s}=(0,a.UO)(),r=(0,a.TH)(),f=(0,i.I0)(),g=(0,i.v9)((e=>e.learners.sortedBy)),y=(0,i.v9)((e=>e.learners.nextPage)),h=(0,i.v9)((e=>e.learners.status)),b=(0,i.v9)((e=>e.learners.usernameSearch)),j=(0,i.v9)(u.IM),Z=(0,i.v9)(u.vZ),N=(0,i.v9)(p);(0,t.useEffect)((()=>{Z&&f(b?(0,v.m)(s,{orderBy:g,usernameSearch:b}):(0,v.m)(s,{orderBy:g}))}),[s,g,Z,b]);const M=(0,t.useCallback)((async()=>{y&&f((0,v.m)(s,{orderBy:g,page:y,usernameSearch:b}))}),[s,g,y,b]),O=(0,t.useCallback)((()=>{f((0,x.SY)(""))}),[]),T=(0,t.useMemo)((()=>j===d.eE.SUCCESSFUL&&Z&&N.map((e=>(0,S.jsx)(B,{learner:e},e.username)))||(0,S.jsx)(S.Fragment,{})),[j,Z,N]);return(0,S.jsxs)("div",{className:"d-flex flex-column border-right border-light-400",children:[!b&&(0,S.jsx)(K,{}),(0,S.jsx)("div",{className:"border-bottom border-light-400"}),b&&(0,S.jsx)(c.Z,{text:b,count:N.length,loadingStatus:h,onClear:O}),(0,S.jsxs)("div",{className:"list-group list-group-flush learner",role:"list",children:[j===d.eE.SUCCESSFUL&&!Z&&(0,S.jsx)(a.l_,{to:q(q({},r),{},{pathname:d.Z5.DISCUSSIONS.PATH})}),T,h===d.eE.IN_PROGRESS?(0,S.jsx)("div",{className:"d-flex justify-content-center p-4",children:(0,S.jsx)(n.Z,{animation:"border",variant:"primary",size:"lg"})}):y&&h===d.eE.SUCCESSFUL&&(0,S.jsx)(o.ZP,{onClick:()=>M(),variant:"primary",size:"md","data-testid":"load-more-learners",children:e.formatMessage(A.Z.loadMore)}),""!==b&&0===N.length&&h===d.eE.SUCCESSFUL&&(0,S.jsx)(m.Z,{})]})]})}}}]);
//# sourceMappingURL=466.33371f1288eeec13b0ae.js.map