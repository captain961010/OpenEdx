"use strict";(globalThis.webpackChunk_edx_frontend_app_discussions=globalThis.webpackChunk_edx_frontend_app_discussions||[]).push([[967],{46967:(e,t,n)=>{n.r(t),n.d(t,{default:()=>R});var o=n(89526),s=n(65455),i=n.n(s),r=n(48446),a=n(2652),c=n.n(a),d=n(3266),l=n(22123),u=n(60025),p=n(25180);const m=o.forwardRef(((e,t)=>{let{advanceButtonText:n,dismissButtonText:s,endButtonText:i,isLastCheckpoint:r,onAdvance:a,onDismiss:c,onEnd:d,showDismissButton:l,index:u}=e;return o.createElement("div",{className:"pgn__checkpoint-action-row",ref:t},(void 0===l?!r:l)&&o.createElement(p.ZP,{variant:"tertiary",className:"pgn__checkpoint-button_dismiss",onClick:c},s),o.createElement(p.ZP,{autoFocus:!0,className:"pgn__checkpoint-button_advance",variant:"primary",onClick:r?()=>d(u):()=>a(u)},r?i:n))}));m.defaultProps={advanceButtonText:"",dismissButtonText:"",endButtonText:"",isLastCheckpoint:!1,onAdvance:()=>{},onDismiss:()=>{},onEnd:()=>{},showDismissButton:void 0,index:0},m.propTypes={advanceButtonText:c().node,dismissButtonText:c().node,endButtonText:c().node,isLastCheckpoint:c().bool,onAdvance:c().func,onDismiss:c().func,onEnd:c().func,showDismissButton:c().bool,index:c().number};const f=m,h=o.forwardRef(((e,t)=>{let{children:n}=e;return n?o.createElement("div",{className:"pgn__checkpoint-body",ref:t},n):null}));h.defaultProps={children:null},h.propTypes={children:c().node};const b=h,g=o.forwardRef(((e,t)=>{let{currentIndex:n,totalCheckpoints:s}=e;return 1===s?null:o.createElement("span",{className:"pgn__checkpoint-breadcrumb-container",ref:t},new Array(s).fill(0).map(((e,t)=>t===n?o.createElement("span",{key:t,className:"pgn__checkpoint-breadcrumb pgn__checkpoint-breadcrumb_active","data-testid":"pgn__checkpoint-breadcrumb_active"}):o.createElement("span",{key:t,className:"pgn__checkpoint-breadcrumb pgn__checkpoint-breadcrumb_inactive","data-testid":"pgn__checkpoint-breadcrumb_inactive"}))))}));g.defaultProps={currentIndex:null,totalCheckpoints:null},g.propTypes={currentIndex:c().number,totalCheckpoints:c().number};const x=g,v=o.forwardRef(((e,t)=>{let{children:n}=e;return o.createElement("h2",{id:"pgn__checkpoint-title",ref:t},n)}));v.defaultProps={children:null},v.propTypes={children:c().node};const _=v,B=["body","index","placement","target","title","totalCheckpoints"];function k(){return k=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},k.apply(this,arguments)}const y=o.forwardRef(((e,t)=>{let{body:s,index:i,placement:r,target:a,title:c,totalCheckpoints:p}=e,m=function(e,t){if(null==e)return{};var n,o,s=function(e,t){if(null==e)return{};var n,o,s={},i=Object.keys(e);for(o=0;o<i.length;o++)n=i[o],t.indexOf(n)>=0||(s[n]=e[n]);return s}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)n=i[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}(e,B);const[h,g]=(0,o.useState)(!1),v=(0,d.useMediaQuery)({maxWidth:u.Z.small.maxWidth});(0,o.useEffect)((()=>{const e=document.querySelector(a),t=document.querySelector("#pgn__checkpoint");if(e&&t){const n=(0,l.fi)(e,t,{placement:v?"top":r,modifiers:[{name:"arrow",options:{padding:25}},{name:"offset",options:{offset:[0,20]}},{name:"preventOverflow",options:{padding:20,tetherOffset:35}}]});g(!0),n&&n.forceUpdate()}}),[a,v,r]),(0,o.useEffect)((()=>{if(h){const e=document.querySelector(a);let t=e.getBoundingClientRect().top;(t<0||e.getBoundingClientRect().bottom>n.g.innerHeight)&&(r.includes("top")?(t<0&&(t*=-1),t-=280):t-=80,n.g.scrollTo({top:t,behavior:"smooth"})),document.querySelector(".pgn__checkpoint-button_advance").focus()}}),[a,h,r]);const y=i+1===p,T=1===p;return o.createElement("div",{id:"pgn__checkpoint",className:"pgn__checkpoint","aria-labelledby":"pgn__checkpoint-title",ref:t,role:"dialog",style:{visibility:h?"visible":"hidden",pointerEvents:h?"auto":"none"}},o.createElement("span",{className:"sr-only"},"Top of step ",i+1),(c||!T)&&o.createElement("div",{className:"pgn__checkpoint-header"},o.createElement(_,null,c),o.createElement(x,{currentIndex:i,totalCheckpoints:p})),o.createElement(b,null,s),o.createElement(f,k({isLastCheckpoint:y,index:i},m)),o.createElement("div",{id:"pgn__checkpoint-arrow","data-popper-arrow":!0}),o.createElement("span",{className:"sr-only"},"Bottom of step ",i+1))}));y.defaultProps={advanceButtonText:null,body:null,dismissButtonText:null,endButtonText:null,placement:"top",title:null,showDismissButton:void 0},y.propTypes={advanceButtonText:c().node,body:c().node,dismissButtonText:c().node,endButtonText:c().node,index:c().number.isRequired,onAdvance:c().func.isRequired,onDismiss:c().func.isRequired,onEnd:c().func.isRequired,placement:c().oneOf(["top","top-start","top-end","right-start","right","right-end","left-start","left","left-end","bottom","bottom-start","bottom-end"]),target:c().string.isRequired,title:c().node,totalCheckpoints:c().number.isRequired,showDismissButton:c().bool};const T=y,E=o.forwardRef(((e,t)=>{let{tours:s}=e;const i=s.find((e=>e.enabled)),{enabled:r,checkpoints:a=[],startingIndex:c,onEscape:d,onEnd:l,onDismiss:u,advanceButtonText:p,dismissButtonText:m,endButtonText:f}=i||{},[h,b]=(0,o.useState)(null),[g,x]=(0,o.useState)(0),[v,_]=(0,o.useState)(!1),[B,k]=(0,o.useState)([]),{title:y,body:E,onAdvance:w,onDismiss:D,advanceButtonText:C,dismissButtonText:O,endButtonText:R,placement:q,target:S,showDismissButton:N}=h||{};return(0,o.useEffect)((()=>{r&&a&&(_(r),(e=>{const t=e.filter((e=>!!document.querySelector(e.target)));k(t)})(a),x(c||0))}),[r,a,c]),(0,o.useEffect)((()=>{v&&B.length&&b(B[g])}),[g,v,B]),(0,o.useEffect)((()=>{const e=e=>{27===e.keyCode&&(_(!1),d&&d())};return n.g.addEventListener("keydown",e),()=>{n.g.removeEventListener("keydown",e)}}),[d]),i&&h&&v?o.createElement(T,{advanceButtonText:C||p,body:E,currentCheckpointData:h,dismissButtonText:O||m,endButtonText:R||f,index:g,onAdvance:()=>{x(g+1),w&&w()},onDismiss:()=>{x(0),_(!1),D?D():u(),b(null)},onEnd:e=>{x(0),_(!1),B[e].onEnd?B[e].onEnd():l&&l(B[e]),b(null)},placement:q,target:S,title:y,totalCheckpoints:B.length,showDismissButton:N,ref:t}):null}));E.defaultProps={tours:{advanceButtonText:"",checkpoints:{advanceButtonText:"",body:"",dismissButtonText:"",endButtonText:"",onAdvance:()=>{},onDismiss:()=>{},placement:"top",title:"",showDismissButton:void 0},dismissButtonText:"",endButtonText:"",onDismiss:()=>{},onEnd:()=>{},onEscape:()=>{},startingIndex:0}},E.propTypes={tours:c().arrayOf(c().shape({advanceButtonText:c().node,checkpoints:c().arrayOf(c().shape({advanceButtonText:c().node,body:c().node,dismissButtonText:c().node,endButtonText:c().node,onAdvance:c().func,onDismiss:c().func,onEnd:c().func,placement:c().oneOf(["top","top-start","top-end","right-start","right","right-end","left-start","left","left-end","bottom","bottom-start","bottom-end"]),target:c().string.isRequired,title:c().node,showDismissButton:c().bool})),dismissButtonText:c().node,enabled:c().bool.isRequired,endButtonText:c().node,onDismiss:c().func,onEnd:c().func,onEscape:c().func,startingIndex:c().number,tourId:c().string.isRequired}))};const w=E;var D=n(62514),C=n(96707),O=n(67557);const R=()=>{const e=(0,r.I0)(),t=(0,D.aG)();return(0,o.useEffect)((()=>{e((0,C.i)())}),[]),(0,O.jsx)(O.Fragment,{children:!i()(t)&&(0,O.jsx)(w,{tours:t})})}}}]);
//# sourceMappingURL=967.b99ddedbb51185646c58.js.map