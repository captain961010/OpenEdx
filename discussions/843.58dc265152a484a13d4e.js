"use strict";(globalThis.webpackChunk_edx_frontend_app_discussions=globalThis.webpackChunk_edx_frontend_app_discussions||[]).push([[843],{26843:(e,t,r)=>{r.r(t),r.d(t,{default:()=>D});var n=r(89526),i=r(2652),o=r.n(i),s=r(64403),a=r.n(s),c=r(48446),l=r(59458),u=r(90575),f=r(1987),b=r(98025),d=r(84790),p=r(29519);function m(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function g(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?m(Object(r),!0).forEach((function(t){v(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function v(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}async function h(e,t){const r=(e=>`${(0,p.bR)()}/api/course_home/course_metadata/${e}`)(e),{data:n}=await(0,d.kj)().get(r);return function(e,t){const r=(0,b.u3)(e);return g(g({},r),{},{tabs:r.tabs.map((e=>({slug:"courseware"===e.tabId?t:e.tabId,title:e.title,url:e.url}))),isMasquerading:r.originalUserIsStaff&&!r.isStaff})}(n,t)}var y=r(28936),O=r(54877),j=r(91524),w=r(22439);const P={position:"absolute",left:0,pointerEvents:"none",visibility:"hidden"};function x(){const e=(0,n.useRef)(null),t=(0,n.useRef)(null),r=(0,n.useRef)({}),[i,o]=(0,n.useState)(-1),s=(0,w.Z)();return(0,n.useLayoutEffect)((()=>{const n=e.current.getBoundingClientRect();if(!n.width===r.current.width)return;r.current=n;const i=Array.prototype.slice.call(e.current.children),{nextIndexOfLastVisibleChild:s}=i.filter((e=>e!==t.current)).reduce(((e,t,r)=>(e.sumWidth+=Math.floor(t.getBoundingClientRect().width),e.sumWidth<=n.width&&(e.nextIndexOfLastVisibleChild=r),e)),{sumWidth:t.current?t.current.getBoundingClientRect().width:0,nextIndexOfLastVisibleChild:-1});o(s)}),[s,e.current]),[i,e,P,t]}var N=r(67557);const S=["children","className"];function I(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function T(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?I(Object(r),!0).forEach((function(t){k(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):I(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function k(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const E=e=>{let{children:t,className:r}=e,i=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,S);const[o,s,c,l]=x(),u=(0,n.useMemo)((()=>{const e=n.Children.toArray(t),r=o+1,i=e.map(((e,t)=>n.cloneElement(e,{style:t>o?c:null}))),s=e.slice(r).map((e=>n.cloneElement(e,{className:"dropdown-item"})));return i.splice(r,0,(0,N.jsx)("div",{className:"nav-item flex-shrink-0",style:r>=n.Children.count(t)?c:null,ref:l,children:(0,N.jsxs)(j.ZP,{className:"h-100",children:[(0,N.jsx)(j.ZP.Toggle,{variant:"link",className:"nav-link h-100",id:"learn.course.tabs.navigation.overflow.menu",children:(0,N.jsx)(O.Z,{id:"learn.course.tabs.navigation.overflow.menu",description:"The title of the overflow menu for course tabs",defaultMessage:"More..."})}),(0,N.jsx)(j.ZP.Menu,{className:"dropdown-menu-right",children:s})]})},"overflow")),i}),[t,o]);return(0,N.jsx)("nav",T(T({},i),{},{className:a()("nav flex-nowrap",r),ref:s,children:u}))};E.propTypes={children:o().node,className:o().string},E.defaultProps={children:null,className:void 0};const C=E,M=(0,r(93477).vU)({courseMaterial:{id:"navigation.course.tabs.label",defaultMessage:"Course Material",description:"The accessible label for course tabs navigation"}}),_=e=>{let{activeTab:t,className:r,courseId:i,rootSlug:o}=e;const s=(0,c.I0)(),b=(0,l.Z)(),d=(0,c.v9)((e=>e.courseTabs.tabs));return(0,n.useEffect)((()=>{s(function(e,t){return async r=>{r((0,y.DJ)({courseId:e}));try{const n=await h(e,t);n.courseAccess.hasAccess?r((0,y.UO)({courseId:e,tabs:n.tabs,org:n.org,courseNumber:n.number,courseTitle:n.title})):r((0,y.lu)({courseId:e}))}catch(t){403===(0,f.yH)(t)?r((0,y.lu)({courseId:e})):r((0,y.f7)({courseId:e})),(0,u.H)(t)}}}(i,o))}),[i]),(0,N.jsx)("div",{id:"courseTabsNavigation",className:a()("course-tabs-navigation px-4",r),children:!!d.length&&(0,N.jsx)(C,{className:"nav-underline-tabs","aria-label":b.formatMessage(M.courseMaterial),children:d.map((e=>{let{url:r,title:n,slug:i}=e;return(0,N.jsx)("a",{className:a()("nav-item flex-shrink-0 nav-link",{active:i===t}),href:r,children:n},i)}))})})};_.propTypes={activeTab:o().string,className:o().string,rootSlug:o().string,courseId:o().string.isRequired},_.defaultProps={activeTab:void 0,className:null,rootSlug:"outline"};const D=n.memo(_)}}]);
//# sourceMappingURL=843.58dc265152a484a13d4e.js.map