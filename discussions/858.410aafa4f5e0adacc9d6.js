"use strict";(globalThis.webpackChunk_edx_frontend_app_discussions=globalThis.webpackChunk_edx_frontend_app_discussions||[]).push([[858],{9002:(e,s,i)=>{i.d(s,{e:()=>N,Rg:()=>C,Zf:()=>j});var t=i(89526),d=i(2652),o=i.n(d),r=i(59458),a=i(8503),n=i(64403),l=i.n(n),c=i(48446),u=i(65092),m=i(565),p=(i(90244),i(63414)),x=i(29519),h=i(43494),g=i(1987),v=i(67557);const f=e=>{let{topic:s,showDivider:i,index:t}=e;const d=(0,r.Z)(),{courseId:o}=(0,u.UO)(),{inactiveFlags:n,activeFlags:f}=((0,c.v9)(h.hJ),(0,c.v9)(h.bK),s),b=e=>window.location.pathname.includes(e),j=(0,g.uu)(x.Z5.TOPICS.TOPIC,{courseId:o,topicId:s.id});return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(m.rU,{className:l()("discussion-topic p-0 text-decoration-none text-primary-500",{"border-light-400 border-bottom":i}),"data-topic-id":s.id,to:j,onClick:()=>b(s.id),"aria-current":b(s.id)?"page":void 0,role:"option",tabIndex:b(s.id)||0===t?0:-1,children:(0,v.jsx)("div",{className:"d-flex flex-row pt-2.5 pb-2 px-4",children:(0,v.jsxs)("div",{className:"d-flex flex-column flex-fill",style:{minWidth:0},children:[(0,v.jsx)("div",{className:"d-flex flex-column justify-content-start mw-100 flex-fill",children:(0,v.jsx)("div",{className:"topic-name text-truncate",children:s?.name||s?.displayName||d.formatMessage(a.Z.unnamedTopicSubCategories)})}),(0,v.jsx)(p.Z,{threadCounts:s?.threadCounts})]})})}),!i&&(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)("div",{className:"divider border-top border-light-500"}),(0,v.jsx)("div",{className:"divider pt-1 bg-light-300"})]})]})},b=o().shape({id:o().string,usage_key:o().string,name:o().string,thread_counts:o().shape({discussions:o().number,questions:o().number}),enabled_in_context:o().bool,flags:o().number});f.propTypes={topic:b,showDivider:o().bool,index:o().number},f.defaultProps={showDivider:!0,index:-1,topic:{usage_key:""}};const j=t.memo(f),y=e=>{let{archivedTopics:s,showDivider:i}=e;const d=(0,r.Z)(),o=(0,t.useMemo)((()=>s?.map(((e,i)=>(0,v.jsx)(j,{topic:e,showDivider:s.length-1!==i},e.id)))),[s]);return(0,v.jsxs)(v.Fragment,{children:[i&&(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)("div",{className:"divider border-top border-light-500"}),(0,v.jsx)("div",{className:"divider pt-1 bg-light-300"})]}),(0,v.jsxs)("div",{className:"discussion-topic-group d-flex flex-column text-primary-500","data-testid":"archived-group",children:[(0,v.jsx)("div",{className:"pt-3 px-4 font-weight-bold",children:d.formatMessage(a.Z.archivedTopics)}),o]})]})};y.propTypes={archivedTopics:o().arrayOf(b).isRequired,showDivider:o().bool},y.defaultProps={showDivider:!1};const N=t.memo(y),I=e=>{let{section:s,sectionTitle:i,sectionId:d,showDivider:o}=e;const n=(0,r.Z)(),{courseId:c}=(0,u.UO)(),h=(0,t.useCallback)((e=>window.location.pathname.includes(e)),[]),f=(0,t.useCallback)((e=>(0,g.uu)(x.Z5.TOPICS.CATEGORY,{courseId:c,category:e})),[c]),b=(0,t.useMemo)((()=>s?.map(((e,i)=>(0,v.jsx)(m.rU,{className:l()("subsection p-0 text-decoration-none text-primary-500",{"border-bottom border-light-400":s.length-1!==i}),role:"option","data-subsection-id":e.id,"data-testid":"subsection-group",to:f(e.id),onClick:()=>h(e.id),"aria-current":h(s.id)?"page":void 0,tabIndex:h(e.id)||0===i?0:-1,children:(0,v.jsx)("div",{className:"d-flex flex-row pt-2.5 pb-2 px-4",children:(0,v.jsx)("div",{className:"d-flex flex-column flex-fill",style:{minWidth:0},children:(0,v.jsxs)("div",{className:"d-flex flex-column justify-content-start mw-100 flex-fill",children:[(0,v.jsx)("div",{className:"topic-name text-truncate",children:e?.displayName||n.formatMessage(a.Z.unnamedSubsection)}),(0,v.jsx)(p.Z,{threadCounts:e?.threadCounts})]})})})},e.id)))),[s,f,h]);return(0,v.jsxs)("div",{className:"discussion-topic-group d-flex flex-column text-primary-500","data-section-id":d,"data-testid":"section-group",children:[(0,v.jsx)("div",{className:"pt-3 px-4 font-weight-bold",children:i||n.formatMessage(a.Z.unnamedSection)}),b,o&&(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)("div",{className:"divider border-top border-light-500"}),(0,v.jsx)("div",{className:"divider pt-1 bg-light-300"})]})]})};I.propTypes={section:o().arrayOf(o().shape({id:o().string,blockId:o().string,lmsWebUrl:o().string,legacyWebUrl:o().string,studentViewUrl:o().string,type:o().string,displayName:o().string,children:o().arrayOf(b)})).isRequired,sectionTitle:o().string.isRequired,sectionId:o().string.isRequired,showDivider:o().bool.isRequired};const C=t.memo(I)},10858:(e,s,i)=>{i.r(s),i.d(s,{default:()=>y});var t=i(89526),d=i(48446),o=i(65092),r=i(59458),a=i(86009),n=i(29519),l=i(57983),c=i(43494),u=i(9387),m=i(19473),p=i(1987),x=i(10999),h=i(50280),g=i(10356),v=i(8503),f=i(9002),b=i(67557);const j=()=>{const e=(0,r.Z)(),s=(0,o.TH)(),i=(0,d.I0)(),{courseId:j,topicId:y,category:N}=(0,t.useContext)(l.H),I=(0,d.v9)(c.BY),C=(0,d.v9)(x.OL),w=(0,d.v9)((0,u.GB)([y])),Z=(0,d.v9)((0,x.R3)(N)),T=(0,d.v9)((0,x.zt)(N)),O=(0,d.v9)(x.D1),S=(0,d.v9)(x.qq),_=(0,d.v9)((0,x.CB)(y)),k=C===n.eE.IN_PROGRESS,D=(0,t.useMemo)((()=>O?.find((e=>e.id===y))),[O,y]),E=(0,t.useMemo)((()=>S?.find((e=>e.id===y))),[S,y]),R=(0,t.useCallback)((()=>{const e=D?n.Z5.TOPICS.CATEGORY:n.Z5.TOPICS.ALL,i=D?{courseId:j,category:D?.parentId}:{courseId:j};return(0,p.uu)(e,i)(s)}),[D]);return(0,t.useEffect)((()=>{I&&C===n.eE.IDLE&&i((0,h.Z)(j))}),[I]),(0,b.jsxs)("div",{className:"discussion-posts d-flex flex-column h-100",children:[y?(0,b.jsx)(g.xE,{loading:k,path:R(),title:D?.name||E?.name||_?.name||e.formatMessage(v.Z.unnamedTopic)}):(0,b.jsx)(g.xE,{loading:k,path:(0,p.uu)(n.Z5.TOPICS.ALL,{courseId:j})(s),title:T?.displayName||e.formatMessage(v.Z.unnamedSubsection)}),(0,b.jsx)("div",{className:"border-bottom border-light-400"}),(0,b.jsxs)("div",{className:"list-group list-group-flush flex-fill",role:"list",onKeyDown:e=>(0,p.$y)(e),children:[y?(0,b.jsx)(m.Z,{postsIds:w,topicsIds:[y],parentIsLoading:k}):Z?.map((e=>(0,b.jsx)(f.Zf,{topic:e},e.id))),N&&0===Z.length&&C===n.eE.SUCCESSFUL&&(0,b.jsx)(g.X6,{}),N&&k&&(0,b.jsx)("div",{className:"d-flex justify-content-center p-4",children:(0,b.jsx)(a.Z,{animation:"border",variant:"primary",size:"lg"})})]})]})},y=t.memo(j)}}]);
//# sourceMappingURL=858.410aafa4f5e0adacc9d6.js.map