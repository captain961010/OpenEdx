"use strict";(globalThis.webpackChunk_edx_frontend_app_discussions=globalThis.webpackChunk_edx_frontend_app_discussions||[]).push([[359],{10908:(e,t,s)=>{s.d(t,{Z:()=>r});const r=(0,s(93477).vU)({reported:{id:"discussions.learner.reported",defaultMessage:"{reported} reported"},previouslyReported:{id:"discussions.learner.previouslyReported",defaultMessage:"{previouslyReported} previously reported"},lastActive:{id:"discussions.learner.lastLogin",defaultMessage:"Last active {lastActiveTime}"},loadMore:{id:"discussions.learner.loadMostLearners",defaultMessage:"Load more",description:"Text on button for loading more learners"},back:{id:"discussions.learner.back",defaultMessage:"Back",description:"Text on button for back to learners list"},activityForLearner:{id:"discussions.learner.activityForLearner",defaultMessage:"Activity for {username}",description:"Text for learners post header"},mostActivity:{id:"discussions.learner.mostActivity",defaultMessage:"Most activity",description:"Text for learners sorting by most activity"},reportedActivity:{id:"discussions.learner.reportedActivity",defaultMessage:"Reported activity",description:"Text for learners sorting by reported activity"},recentActivity:{id:"discussions.learner.recentActivity",defaultMessage:"Recent activity",description:"Text for learners sorting by recent activity"},sortFilterStatus:{id:"discussions.learner.sortFilterStatus",defaultMessage:"All learners sorted by {sort, select,\n      flagged {reported activity}\n      activity {most activity}\n      other {{sort}}\n    }",description:"Text for current selected learners filter"},allActivity:{id:"discussion.learner.allActivity",defaultMessage:"All activity",description:"Tooltip text for all activity icon"},posts:{id:"discussion.learner.posts",defaultMessage:"Posts",description:"Tooltip text for all posts icon"}})},63359:(e,t,s)=>{s.r(t),s.d(t,{default:()=>K});var r=s(89526),i=s(29923),o=s.n(i),a=s(48446),l=s(65092),n=s(59458),d=s(59058),c=s(99912),u=s(86009),p=s(25180),f=s(90244),v=s(29519),y=s(57983),m=s(43494),g=s(20384),h=s(9387),b=s(35743),x=s(51873),j=s(73792),M=s(1987),T=s(64660),Z=s(53059),S=s(86615),N=s(2652),O=s.n(N),C=s(56549),w=s(48387),F=s(84387),E=s(99638),A=s(42376),R=s(42119),P=s(6528),_=s(67557);const k=e=>{let{intl:t,filters:s,selectedFilters:i,onFilterChange:o,showCohortsFilter:l}=e;const[n,d]=(0,r.useState)(!1),p=(0,a.v9)(A.E),{status:y}=(0,a.v9)((e=>e.cohorts)),m=(0,r.useMemo)((()=>p.find((e=>(0,Z.toString)(e.id)===i.cohort))),[i.cohort]),g=[{id:"type-all",label:t.formatMessage(R.Z.allPosts),value:v.Th.ALL},{id:"type-discussions",label:t.formatMessage(R.Z.filterDiscussions),value:v.Th.DISCUSSION},{id:"type-questions",label:t.formatMessage(R.Z.filterQuestions),value:v.Th.QUESTION},{id:"status-any",label:t.formatMessage(R.Z.filterAnyStatus),value:v.rM.ALL},{id:"status-unread",label:t.formatMessage(R.Z.filterUnread),value:v.rM.UNREAD},{id:"status-reported",label:t.formatMessage(R.Z.filterReported),value:v.rM.REPORTED},{id:"status-unanswered",label:t.formatMessage(R.Z.filterUnanswered),value:v.rM.UNANSWERED},{id:"status-unresponded",label:t.formatMessage(R.Z.filterUnresponded),value:v.rM.UNRESPONDED},{id:"sort-activity",label:t.formatMessage(R.Z.lastActivityAt),value:v.C3.BY_LAST_ACTIVITY},{id:"sort-comments",label:t.formatMessage(R.Z.commentCount),value:v.C3.BY_COMMENT_COUNT},{id:"sort-votes",label:t.formatMessage(R.Z.voteCount),value:v.C3.BY_VOTE_COUNT}];return(0,_.jsxs)(F.Z.Advanced,{open:n,onToggle:()=>d(!n),className:"filter-bar collapsible-card-lg border-0",children:[(0,_.jsxs)(F.Z.Trigger,{className:"collapsible-trigger border-0",children:[(0,_.jsx)("span",{className:"text-primary-700 pr-4",children:t.formatMessage(R.Z.sortFilterStatus,{own:!1,type:i.postType,sort:i.orderBy,status:i.status,cohortType:m?.name?"group":"all",cohort:(0,Z.capitalize)(m?.name)})}),(0,_.jsx)(F.Z.Visible,{whenClosed:!0,children:(0,_.jsx)(c.Z,{src:f.KWz})}),(0,_.jsx)(F.Z.Visible,{whenOpen:!0,children:(0,_.jsx)(c.Z,{src:f.KWz})})]}),(0,_.jsx)(F.Z.Body,{className:"collapsible-body px-4 pb-3 pt-0",children:(0,_.jsxs)(E.ZP,{children:[(0,_.jsx)("div",{className:"d-flex flex-row py-2 justify-content-between",children:s.map((e=>(0,_.jsx)(E.ZP.RadioSet,{name:e.name,className:"d-flex flex-column list-group list-group-flush",value:i[e.name],onChange:o,children:e.filters.map((t=>{const s=g.find((e=>e.id===t));return!!s&&(0,_.jsx)(P.t,{id:s.id,label:s.label,value:s.value,selected:i[e.name]},s.id)}))},e.name)))}),l&&(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)("div",{className:"border-bottom my-2"}),y===v.eE.IN_PROGRESS?(0,_.jsx)("div",{className:"d-flex justify-content-center p-4",children:(0,_.jsx)(u.Z,{animation:"border",variant:"primary",size:"lg"})}):(0,_.jsx)("div",{className:"d-flex flex-row pt-2",children:(0,_.jsxs)(E.ZP.RadioSet,{name:"cohort",className:"d-flex flex-column list-group list-group-flush w-100",value:i.cohort,onChange:o,children:[(0,_.jsx)(P.t,{id:"all-groups",label:"All groups",value:"",selected:i.cohort}),p.map((e=>(0,_.jsx)(P.t,{id:(0,Z.toString)(e.id),label:(0,Z.capitalize)(e.name),value:(0,Z.toString)(e.id),selected:i.cohort},(0,Z.toString)(e.id))))]})})]})]})})]})};k.propTypes={intl:C.gm.isRequired,filters:O().array.isRequired,selectedFilters:O().object.isRequired,onFilterChange:O().func.isRequired,showCohortsFilter:O().bool},k.defaultProps={showCohortsFilter:!1};const B=(0,w.Z)(k);var U=s(81609),I=s(32516);function L(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,r)}return s}function D(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?L(Object(s),!0).forEach((function(t){z(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):L(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function z(e,t,s){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var s=e[Symbol.toPrimitive];if(void 0!==s){var r=s.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const q=()=>{const e=(0,a.I0)(),{courseId:t}=(0,l.UO)(),s=(0,a.v9)(m.hJ),i=(0,a.v9)(m.bK),o=(0,a.v9)(A.E),n=(0,a.v9)((e=>e.learners.postFilter)),d=[{name:"postType",filters:["type-all","type-discussions","type-questions"]},{name:"status",filters:["status-any","status-unread","status-unanswered","status-unresponded"]},{name:"orderBy",filters:["sort-activity","sort-comments","sort-votes"]}];return(s||i)&&d[1].filters.splice(2,0,"status-reported"),(0,r.useEffect)((()=>{s&&(0,Z.isEmpty)(o)&&e((0,U.B)(t))}),[t,s]),(0,_.jsx)(B,{filters:d,selectedFilters:n,onFilterChange:t=>{const{name:s,value:r}=t.currentTarget,i={statusFilter:n.status,threadTypeFilter:n.postType,sortFilter:n.orderBy,cohortFilter:n.cohort,triggeredBy:s};"postType"===s?n.postType!==r&&(e((0,I.le)(D(D({},n),{},{postType:r}))),i.threadTypeFilter=r):"status"===s?n.status!==r&&(e((0,I.le)(D(D({},n),{},{status:r}))),i.statusFilter=r):"orderBy"===s?n.orderBy!==r&&(e((0,I.le)(D(D({},n),{},{orderBy:r}))),i.sortFilter=r):"cohort"===s&&n.cohort!==r&&(e((0,I.le)(D(D({},n),{},{cohort:r}))),i.cohortFilter=r),(0,S.hC)("edx.forum.filter.content",i)},showCohortsFilter:s||i})};var V=s(10908);const K=()=>{const e=(0,n.Z)(),t=(0,l.TH)(),s=(0,l.k6)(),i=(0,a.I0)(),Z=(0,a.v9)(h.rC),S=(0,a.v9)((0,h.Sr)()),N=(0,a.v9)((e=>e.learners.postFilter)),{courseId:O,learnerUsername:C}=(0,r.useContext)(y.H),w=(0,a.v9)((0,h.Ok)()),F=(0,a.v9)(m.hJ),E=(0,a.v9)(m.Vw),A=(0,g.N)(Z),R=(0,r.useCallback)((function(){const e={author:C,page:arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,filters:N,orderBy:N.orderBy,countFlagged:F||E||void 0};i((0,T.b)(O,e))}),[O,N,C,F,E]),P=(0,r.useMemo)((()=>A?.map(((e,t)=>(0,_.jsx)(j.s,{postId:e,idx:t,showDivider:A.length-1!==t},e)))),[A]);return(0,r.useEffect)((()=>{i((0,b.eK)()),R()}),[O,N,C]),(0,_.jsxs)("div",{className:"discussion-posts d-flex flex-column",children:[(0,_.jsxs)("div",{className:"d-flex align-items-center justify-content-between px-2.5",children:[(0,_.jsx)(d.Z,{src:f.xhZ,iconAs:c.Z,style:{padding:"18px"},size:"inline",onClick:()=>s.push((0,M.uu)(v.Z5.LEARNERS.PATH,{courseId:O})(t)),alt:e.formatMessage(V.Z.back)}),(0,_.jsx)("div",{className:"text-primary-500 font-style font-weight-bold py-2.5",children:e.formatMessage(V.Z.activityForLearner,{username:o()(C)})}),(0,_.jsx)("div",{style:{padding:"18px"}})]}),(0,_.jsx)("div",{className:"bg-light-400 border border-light-300"}),(0,_.jsx)(q,{}),(0,_.jsx)("div",{className:"border-bottom border-light-400"}),(0,_.jsxs)("div",{className:"list-group list-group-flush",children:[P,S!==v.eE.IN_PROGRESS&&0===A?.length&&(0,_.jsx)(x.Z,{}),S===v.eE.IN_PROGRESS?(0,_.jsx)("div",{className:"d-flex justify-content-center p-4",children:(0,_.jsx)(u.Z,{animation:"border",variant:"primary",size:"lg"})}):w&&S===v.eE.SUCCESSFUL&&(0,_.jsx)(p.ZP,{onClick:()=>R(w),variant:"primary",size:"md","data-testid":"load-more-posts",children:e.formatMessage(V.Z.loadMore)})]})]})}}}]);
//# sourceMappingURL=359.03d157208f8a96b67c9b.js.map