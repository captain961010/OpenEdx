"use strict";(globalThis.webpackChunk_edx_frontend_app_course_authoring=globalThis.webpackChunk_edx_frontend_app_course_authoring||[]).push([[657],{38349:(e,s,r)=>{r.d(s,{Z:()=>B});var a=r(56549),n=r(48387),t=r(95381),i=r(34926),l=r(41857),o=r(23768),d=r(4138),u=r(77062),g=r(95765),c=r(40113),p=r(36284),b=r(6871),h=r(2652),f=r.n(h),m=r(89526),v=r(2984),j=r(58417),S=r(29519),M=r(87037),x=r(26672),y=r(72079),P=r(56132),O=r(88146),R=r(58408),C=r(79138),w=r(22423),E=r(72999),Z=r(26329),k=r(94488);const T=(0,r(93477).vU)({cancel:{id:"course-authoring.pages-resources.app-settings-modal.button.cancel",defaultMessage:"Cancel"},save:{id:"course-authoring.pages-resources.app-settings-modal.button.save",defaultMessage:"Save"},saving:{id:"course-authoring.pages-resources.app-settings-modal.button.saving",defaultMessage:"Saving"},saved:{id:"course-authoring.pages-resources.app-settings-modal.button.saved",defaultMessage:"Saved"},retry:{id:"course-authoring.pages-resources.app-settings-modal.button.retry",defaultMessage:"Retry"},enabled:{id:"course-authoring.pages-resources.app-settings-modal.badge.enabled",defaultMessage:"Enabled"},disabled:{id:"course-authoring.pages-resources.app-settings-modal.badge.disabled",defaultMessage:"Disabled"},errorSavingTitle:{id:"course-authoring.pages-resources.app-settings-modal.save-error.title",defaultMessage:"We couldn't apply your changes."},errorSavingMessage:{id:"course-authoring.pages-resources.app-settings-modal.save-error.message",defaultMessage:"Please check your entries and try again."}});var q=r(67557);function L(e,s){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);s&&(a=a.filter((function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable}))),r.push.apply(r,a)}return r}function _(e){for(var s=1;s<arguments.length;s++){var r=null!=arguments[s]?arguments[s]:{};s%2?L(Object(r),!0).forEach((function(s){A(e,s,r[s])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):L(Object(r)).forEach((function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))}))}return e}function A(e,s,r){return(s=function(e){var s=function(e,s){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,"string");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof s?s:String(s)}(s))in e?Object.defineProperty(e,s,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[s]=r,e}const G=e=>{let{formikProps:s,children:r,showForm:a}=e;return r&&(0,q.jsx)(t.Z,{children:a?(0,q.jsx)(m.Fragment,{children:r(s)},"app-enabled"):(0,q.jsx)(m.Fragment,{},"app-disabled")})};G.propTypes={formikProps:f().object.isRequired,showForm:f().bool.isRequired,children:f().func},G.defaultProps={children:null};const I=e=>{let{intl:s,title:r,onClose:a,variant:n,isMobile:t,children:o,footer:d}=e;return(0,q.jsxs)(i.Z,{title:r,isOpen:!0,onClose:a,size:"lg",variant:n,hasCloseButton:t,isFullscreenOnMobile:!0,children:[(0,q.jsx)(i.Z.Header,{children:(0,q.jsx)(i.Z.Title,{"data-testid":"modal-title",children:r})}),(0,q.jsx)(i.Z.Body,{children:o}),(0,q.jsx)(i.Z.Footer,{className:"p-4",children:(0,q.jsxs)(l.Z,{children:[(0,q.jsx)(i.Z.CloseButton,{variant:"tertiary",children:s.formatMessage(T.cancel)}),d]})})]})};I.propTypes={intl:a.gm.isRequired,title:f().string.isRequired,onClose:f().func.isRequired,variant:f().oneOf(["default","dark"]).isRequired,isMobile:f().bool.isRequired,children:f().node.isRequired,footer:f().node},I.defaultProps={footer:null};const F=e=>{let{intl:s,appId:r,title:a,children:n,configureBeforeEnable:t,initialValues:i,validationSchema:l,onClose:h,onSettingsSave:f,enableAppLabel:L,enableAppHelp:A,learnMoreText:F,enableReinitialize:B,hideAppToggle:H}=e;const{courseId:N}=(0,m.useContext)(k.e),D=(0,v.v9)(C.vc),U=(0,v.v9)(C.Yu),V=(0,m.useRef)(null),[z,Y]=(0,m.useState)(!1),J=(0,P.tT)("courseApps",r),W=(0,v.I0)(),$=U===S.eE.IN_PROGRESS?"pending":"default",K=(0,R.dD)(),Q=K?"dark":"default";(0,m.useEffect)((()=>{U===S.eE.SUCCESSFUL&&(W((0,w.Yn)({status:""})),h())}),[U]);const X=e=>{let{handleSubmit:s,errors:r}=e;return async e=>{await s(e),Object.keys(r).length>0&&(await Y(!0),V?.current.scrollIntoView?.())}},ee=J.documentationLinks?.learnMoreConfiguration&&(0,q.jsx)(o.ZP,{className:"text-primary-500",destination:J.documentationLinks.learnMoreConfiguration,target:"_blank",rel:"noreferrer noopener",children:F});return D===S.eE.SUCCESSFUL?(0,q.jsx)(b.J9,{initialValues:_({enabled:!!J?.enabled},i),validationSchema:j.Ry().shape(_({enabled:j.O7()},l)),onSubmit:async e=>{let s=!0;J.enabled!==e.enabled&&(s=await W((0,E.JU)(N,J.id,e.enabled))),f&&(s=s&&await f(e)),await Y(!s),!s&&V?.current.scrollIntoView()},enableReinitialize:B,children:e=>(0,q.jsx)(d.ZP,{onSubmit:X(e),children:(0,q.jsxs)(I,{title:a,isOpen:!0,onClose:h,variant:Q,isMobile:K,isFullscreenOnMobile:!0,intl:s,footer:(0,q.jsx)(u.Z,{labels:{default:s.formatMessage(T.save),pending:s.formatMessage(T.saving),complete:s.formatMessage(T.saved)},state:$,onClick:X(e)}),children:[z&&(0,q.jsxs)(g.Z,{variant:"danger",icon:p.Z,ref:V,children:[(0,q.jsx)(g.Z.Heading,{children:e.errors.enabled?.title||s.formatMessage(T.errorSavingTitle)}),e.errors.enabled?.message||s.formatMessage(T.errorSavingMessage)]}),!H&&(0,q.jsx)(x.Z,{id:`enable-${r}-toggle`,name:"enabled",onChange:s=>e.handleChange(s),onBlur:e.handleBlur,checked:e.values.enabled,label:(0,q.jsxs)("div",{className:"d-flex align-items-center",children:[L,e.values.enabled&&(0,q.jsx)(c.Z,{className:"ml-2",variant:"success","data-testid":"enable-badge",children:s.formatMessage(T.enabled)})]}),helpText:(0,q.jsxs)("div",{children:[(0,q.jsx)("p",{children:A}),(0,q.jsx)("span",{className:"py-3",children:ee})]})}),(e.values.enabled||t)&&n&&(0,q.jsx)(Z.Z,{marginAdj:{default:0,sm:0}}),(0,q.jsx)(G,{formikProps:e,showForm:e.values.enabled||t,children:n})]})})}):(0,q.jsxs)(I,{intl:s,title:a,isOpen:!0,onClose:h,size:"sm",variant:Q,isMobile:K,isFullscreenOnMobile:!0,children:[D===S.eE.IN_PROGRESS&&(0,q.jsx)(y.Z,{}),D===S.eE.FAILED&&(0,q.jsx)(M.Z,{}),D===S.eE.DENIED&&(0,q.jsx)(O.Z,{})]})};F.propTypes={intl:a.gm.isRequired,title:f().string.isRequired,appId:f().string.isRequired,children:f().func,onSettingsSave:f().func,initialValues:f().shape({}),validationSchema:f().shape({}),onClose:f().func.isRequired,enableAppLabel:f().string.isRequired,enableAppHelp:f().string.isRequired,learnMoreText:f().string.isRequired,configureBeforeEnable:f().bool,enableReinitialize:f().bool,hideAppToggle:f().bool},F.defaultProps={children:null,onSettingsSave:null,initialValues:{},validationSchema:{},configureBeforeEnable:!1,enableReinitialize:!1,hideAppToggle:!1};const B=(0,n.Z)(F)},67657:(e,s,r)=>{r.r(s),r.d(s,{default:()=>h});var a=r(56549),n=r(48387),t=r(2652),i=r.n(t),l=(r(89526),r(58417)),o=r(76079),d=r(26672),u=r(58408),g=r(38349);const c=(0,r(93477).vU)({heading:{id:"course-authoring.pages-resources.progress.heading",defaultMessage:"Configure progress"},enableProgressLabel:{id:"course-authoring.pages-resources.progress.enable-progress.label",defaultMessage:"Progress"},enableProgressHelp:{id:"course-authoring.pages-resources.progress.enable-progress.help",defaultMessage:"As students work through graded assignments, scores\n        will appear under the progress tab. The progress tab contains a chart of\n        all graded assignments in the course, with a list of all assignments and\n        scores below."},enableProgressLink:{id:"course-authoring.pages-resources.progress.enable-progress.link",defaultMessage:"Learn more about progress"},enableGraphLabel:{id:"course-authoring.pages-resources.progress.enable-graph.label",defaultMessage:"Enable progress graph"},enableGraphHelp:{id:"course-authoring.pages-resources.progress.enable-graph.help",defaultMessage:"If enabled, students can view the progress graph"}});var p=r(67557);const b=e=>{let{intl:s,onClose:r}=e;const[a,n]=(0,u.Yc)("disableProgressGraph"),t="true"===(0,o.iE)().ENABLE_PROGRESS_GRAPH_SETTINGS.toString().toLowerCase();return(0,p.jsx)(g.Z,{appId:"progress",title:s.formatMessage(c.heading),enableAppHelp:s.formatMessage(c.enableProgressHelp),enableAppLabel:s.formatMessage(c.enableProgressLabel),learnMoreText:s.formatMessage(c.enableProgressLink),onClose:r,initialValues:{enableProgressGraph:!a},validationSchema:{enableProgressGraph:l.O7()},onSettingsSave:e=>{t&&n(!e.enableProgressGraph)},children:e=>{let{handleChange:r,handleBlur:a,values:n}=e;return t&&(0,p.jsx)(d.Z,{id:"enable-progress-graph",name:"enableProgressGraph",label:s.formatMessage(c.enableGraphLabel),helpText:s.formatMessage(c.enableGraphHelp),onChange:r,onBlur:a,checked:n.enableProgressGraph})}})};b.propTypes={intl:a.gm.isRequired,onClose:i().func.isRequired};const h=(0,n.Z)(b)}}]);
//# sourceMappingURL=657.6f234e9936f07a048c1e.js.map