"use strict";(globalThis.webpackChunk_edx_frontend_app_course_authoring=globalThis.webpackChunk_edx_frontend_app_course_authoring||[]).push([[13],{38349:(e,i,a)=>{a.d(i,{Z:()=>B});var n=a(56549),s=a(48387),r=a(95381),l=a(34926),t=a(41857),o=a(23768),u=a(4138),d=a(77062),c=a(95765),g=a(40113),p=a(36284),b=a(6871),h=a(2652),f=a.n(h),m=a(89526),v=a(2984),k=a(58417),j=a(29519),w=a(87037),M=a(26672),x=a(72079),y=a(56132),S=a(88146),P=a(58408),O=a(79138),C=a(22423),R=a(72999),Z=a(26329),E=a(94488);const T=(0,a(93477).vU)({cancel:{id:"course-authoring.pages-resources.app-settings-modal.button.cancel",defaultMessage:"Cancel"},save:{id:"course-authoring.pages-resources.app-settings-modal.button.save",defaultMessage:"Save"},saving:{id:"course-authoring.pages-resources.app-settings-modal.button.saving",defaultMessage:"Saving"},saved:{id:"course-authoring.pages-resources.app-settings-modal.button.saved",defaultMessage:"Saved"},retry:{id:"course-authoring.pages-resources.app-settings-modal.button.retry",defaultMessage:"Retry"},enabled:{id:"course-authoring.pages-resources.app-settings-modal.badge.enabled",defaultMessage:"Enabled"},disabled:{id:"course-authoring.pages-resources.app-settings-modal.badge.disabled",defaultMessage:"Disabled"},errorSavingTitle:{id:"course-authoring.pages-resources.app-settings-modal.save-error.title",defaultMessage:"We couldn't apply your changes."},errorSavingMessage:{id:"course-authoring.pages-resources.app-settings-modal.save-error.message",defaultMessage:"Please check your entries and try again."}});var W=a(67557);function q(e,i){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);i&&(n=n.filter((function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable}))),a.push.apply(a,n)}return a}function L(e){for(var i=1;i<arguments.length;i++){var a=null!=arguments[i]?arguments[i]:{};i%2?q(Object(a),!0).forEach((function(i){A(e,i,a[i])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):q(Object(a)).forEach((function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(a,i))}))}return e}function A(e,i,a){return(i=function(e){var i=function(e,i){if("object"!=typeof e||null===e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var n=a.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof i?i:String(i)}(i))in e?Object.defineProperty(e,i,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[i]=a,e}const F=e=>{let{formikProps:i,children:a,showForm:n}=e;return a&&(0,W.jsx)(r.Z,{children:n?(0,W.jsx)(m.Fragment,{children:a(i)},"app-enabled"):(0,W.jsx)(m.Fragment,{},"app-disabled")})};F.propTypes={formikProps:f().object.isRequired,showForm:f().bool.isRequired,children:f().func},F.defaultProps={children:null};const _=e=>{let{intl:i,title:a,onClose:n,variant:s,isMobile:r,children:o,footer:u}=e;return(0,W.jsxs)(l.Z,{title:a,isOpen:!0,onClose:n,size:"lg",variant:s,hasCloseButton:r,isFullscreenOnMobile:!0,children:[(0,W.jsx)(l.Z.Header,{children:(0,W.jsx)(l.Z.Title,{"data-testid":"modal-title",children:a})}),(0,W.jsx)(l.Z.Body,{children:o}),(0,W.jsx)(l.Z.Footer,{className:"p-4",children:(0,W.jsxs)(t.Z,{children:[(0,W.jsx)(l.Z.CloseButton,{variant:"tertiary",children:i.formatMessage(T.cancel)}),u]})})]})};_.propTypes={intl:n.gm.isRequired,title:f().string.isRequired,onClose:f().func.isRequired,variant:f().oneOf(["default","dark"]).isRequired,isMobile:f().bool.isRequired,children:f().node.isRequired,footer:f().node},_.defaultProps={footer:null};const I=e=>{let{intl:i,appId:a,title:n,children:s,configureBeforeEnable:r,initialValues:l,validationSchema:t,onClose:h,onSettingsSave:f,enableAppLabel:q,enableAppHelp:A,learnMoreText:I,enableReinitialize:B,hideAppToggle:D}=e;const{courseId:H}=(0,m.useContext)(E.e),N=(0,v.v9)(O.vc),U=(0,v.v9)(O.Yu),V=(0,m.useRef)(null),[z,Y]=(0,m.useState)(!1),G=(0,y.tT)("courseApps",a),J=(0,v.I0)(),Q=U===j.eE.IN_PROGRESS?"pending":"default",X=(0,P.dD)(),$=X?"dark":"default";(0,m.useEffect)((()=>{U===j.eE.SUCCESSFUL&&(J((0,C.Yn)({status:""})),h())}),[U]);const K=e=>{let{handleSubmit:i,errors:a}=e;return async e=>{await i(e),Object.keys(a).length>0&&(await Y(!0),V?.current.scrollIntoView?.())}},ee=G.documentationLinks?.learnMoreConfiguration&&(0,W.jsx)(o.ZP,{className:"text-primary-500",destination:G.documentationLinks.learnMoreConfiguration,target:"_blank",rel:"noreferrer noopener",children:I});return N===j.eE.SUCCESSFUL?(0,W.jsx)(b.J9,{initialValues:L({enabled:!!G?.enabled},l),validationSchema:k.Ry().shape(L({enabled:k.O7()},t)),onSubmit:async e=>{let i=!0;G.enabled!==e.enabled&&(i=await J((0,R.JU)(H,G.id,e.enabled))),f&&(i=i&&await f(e)),await Y(!i),!i&&V?.current.scrollIntoView()},enableReinitialize:B,children:e=>(0,W.jsx)(u.ZP,{onSubmit:K(e),children:(0,W.jsxs)(_,{title:n,isOpen:!0,onClose:h,variant:$,isMobile:X,isFullscreenOnMobile:!0,intl:i,footer:(0,W.jsx)(d.Z,{labels:{default:i.formatMessage(T.save),pending:i.formatMessage(T.saving),complete:i.formatMessage(T.saved)},state:Q,onClick:K(e)}),children:[z&&(0,W.jsxs)(c.Z,{variant:"danger",icon:p.Z,ref:V,children:[(0,W.jsx)(c.Z.Heading,{children:e.errors.enabled?.title||i.formatMessage(T.errorSavingTitle)}),e.errors.enabled?.message||i.formatMessage(T.errorSavingMessage)]}),!D&&(0,W.jsx)(M.Z,{id:`enable-${a}-toggle`,name:"enabled",onChange:i=>e.handleChange(i),onBlur:e.handleBlur,checked:e.values.enabled,label:(0,W.jsxs)("div",{className:"d-flex align-items-center",children:[q,e.values.enabled&&(0,W.jsx)(g.Z,{className:"ml-2",variant:"success","data-testid":"enable-badge",children:i.formatMessage(T.enabled)})]}),helpText:(0,W.jsxs)("div",{children:[(0,W.jsx)("p",{children:A}),(0,W.jsx)("span",{className:"py-3",children:ee})]})}),(e.values.enabled||r)&&s&&(0,W.jsx)(Z.Z,{marginAdj:{default:0,sm:0}}),(0,W.jsx)(F,{formikProps:e,showForm:e.values.enabled||r,children:s})]})})}):(0,W.jsxs)(_,{intl:i,title:n,isOpen:!0,onClose:h,size:"sm",variant:$,isMobile:X,isFullscreenOnMobile:!0,children:[N===j.eE.IN_PROGRESS&&(0,W.jsx)(x.Z,{}),N===j.eE.FAILED&&(0,W.jsx)(w.Z,{}),N===j.eE.DENIED&&(0,W.jsx)(S.Z,{})]})};I.propTypes={intl:n.gm.isRequired,title:f().string.isRequired,appId:f().string.isRequired,children:f().func,onSettingsSave:f().func,initialValues:f().shape({}),validationSchema:f().shape({}),onClose:f().func.isRequired,enableAppLabel:f().string.isRequired,enableAppHelp:f().string.isRequired,learnMoreText:f().string.isRequired,configureBeforeEnable:f().bool,enableReinitialize:f().bool,hideAppToggle:f().bool},I.defaultProps={children:null,onSettingsSave:null,initialValues:{},validationSchema:{},configureBeforeEnable:!1,enableReinitialize:!1,hideAppToggle:!1};const B=(0,s.Z)(I)},47013:(e,i,a)=>{a.r(i),a.d(i,{default:()=>b});var n=a(56549),s=a(48387),r=a(2652),l=a.n(r),t=(a(89526),a(58417)),o=a(26672),u=a(58408),d=a(38349);const c=(0,a(93477).vU)({heading:{id:"course-authoring.pages-resources.wiki.heading",defaultMessage:"Configure wiki"},enableWikiLabel:{id:"course-authoring.pages-resources.wiki.enable-wiki.label",defaultMessage:"Wiki"},enableWikiHelp:{id:"course-authoring.pages-resources.wiki.enable-wiki.help",defaultMessage:"The course wiki can be set up based on the needs of your\n    course. Common uses might include sharing answers to course FAQs, sharing\n    editable course information, or providing access to learner-created\n    resources."},enableWikiLink:{id:"course-authoring.pages-resources.wiki.enable-wiki.link",defaultMessage:"Learn more about the wiki"},enablePublicWikiLabel:{id:"course-authoring.pages-resources.wiki.enable-public-wiki.label",defaultMessage:"Enable public wiki access"},enablePublicWikiHelp:{id:"course-authoring.pages-resources.wiki.enable-public-wiki.help",defaultMessage:"If enabled, edX users can view the course wiki even when\n    they're not enrolled in the course."}});var g=a(67557);const p=e=>{let{intl:i,onClose:a}=e;const[n,s]=(0,u.Yc)("allowPublicWikiAccess");return(0,g.jsx)(d.Z,{appId:"wiki",title:i.formatMessage(c.heading),enableAppHelp:i.formatMessage(c.enableWikiHelp),enableAppLabel:i.formatMessage(c.enableWikiLabel),learnMoreText:i.formatMessage(c.enableWikiLink),onClose:a,initialValues:{enablePublicWiki:n},validationSchema:{enablePublicWiki:t.O7()},onSettingsSave:e=>s(e.enablePublicWiki),children:e=>{let{values:a,handleChange:n,handleBlur:s}=e;return(0,g.jsx)(o.Z,{id:"enable-public-wiki",name:"enablePublicWiki",label:i.formatMessage(c.enablePublicWikiLabel),helpText:i.formatMessage(c.enablePublicWikiHelp),onChange:n,onBlue:s,checked:a.enablePublicWiki})}})};p.propTypes={intl:n.gm.isRequired,onClose:l().func.isRequired};const b=(0,s.Z)(p)}}]);
//# sourceMappingURL=13.d5226f4eda9cc3431e36.js.map