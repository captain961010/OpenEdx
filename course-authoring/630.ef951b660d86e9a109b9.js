"use strict";(globalThis.webpackChunk_edx_frontend_app_course_authoring=globalThis.webpackChunk_edx_frontend_app_course_authoring||[]).push([[630],{38349:(e,r,a)=>{a.d(r,{Z:()=>B});var s=a(56549),n=a(48387),i=a(95381),t=a(34926),l=a(41857),o=a(23768),d=a(4138),u=a(77062),c=a(95765),g=a(40113),p=a(36284),b=a(6871),h=a(2652),f=a.n(h),m=a(89526),v=a(2984),x=a(58417),j=a(29519),S=a(87037),y=a(26672),M=a(72079),P=a(56132),O=a(88146),R=a(58408),C=a(79138),Z=a(22423),F=a(72999),k=a(26329),w=a(94488);const E=(0,a(93477).vU)({cancel:{id:"course-authoring.pages-resources.app-settings-modal.button.cancel",defaultMessage:"Cancel"},save:{id:"course-authoring.pages-resources.app-settings-modal.button.save",defaultMessage:"Save"},saving:{id:"course-authoring.pages-resources.app-settings-modal.button.saving",defaultMessage:"Saving"},saved:{id:"course-authoring.pages-resources.app-settings-modal.button.saved",defaultMessage:"Saved"},retry:{id:"course-authoring.pages-resources.app-settings-modal.button.retry",defaultMessage:"Retry"},enabled:{id:"course-authoring.pages-resources.app-settings-modal.badge.enabled",defaultMessage:"Enabled"},disabled:{id:"course-authoring.pages-resources.app-settings-modal.badge.disabled",defaultMessage:"Disabled"},errorSavingTitle:{id:"course-authoring.pages-resources.app-settings-modal.save-error.title",defaultMessage:"We couldn't apply your changes."},errorSavingMessage:{id:"course-authoring.pages-resources.app-settings-modal.save-error.message",defaultMessage:"Please check your entries and try again."}});var T=a(67557);function q(e,r){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);r&&(s=s.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),a.push.apply(a,s)}return a}function _(e){for(var r=1;r<arguments.length;r++){var a=null!=arguments[r]?arguments[r]:{};r%2?q(Object(a),!0).forEach((function(r){A(e,r,a[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):q(Object(a)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(a,r))}))}return e}function A(e,r,a){return(r=function(e){var r=function(e,r){if("object"!=typeof e||null===e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var s=a.call(e,"string");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof r?r:String(r)}(r))in e?Object.defineProperty(e,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[r]=a,e}const G=e=>{let{formikProps:r,children:a,showForm:s}=e;return a&&(0,T.jsx)(i.Z,{children:s?(0,T.jsx)(m.Fragment,{children:a(r)},"app-enabled"):(0,T.jsx)(m.Fragment,{},"app-disabled")})};G.propTypes={formikProps:f().object.isRequired,showForm:f().bool.isRequired,children:f().func},G.defaultProps={children:null};const L=e=>{let{intl:r,title:a,onClose:s,variant:n,isMobile:i,children:o,footer:d}=e;return(0,T.jsxs)(t.Z,{title:a,isOpen:!0,onClose:s,size:"lg",variant:n,hasCloseButton:i,isFullscreenOnMobile:!0,children:[(0,T.jsx)(t.Z.Header,{children:(0,T.jsx)(t.Z.Title,{"data-testid":"modal-title",children:a})}),(0,T.jsx)(t.Z.Body,{children:o}),(0,T.jsx)(t.Z.Footer,{className:"p-4",children:(0,T.jsxs)(l.Z,{children:[(0,T.jsx)(t.Z.CloseButton,{variant:"tertiary",children:r.formatMessage(E.cancel)}),d]})})]})};L.propTypes={intl:s.gm.isRequired,title:f().string.isRequired,onClose:f().func.isRequired,variant:f().oneOf(["default","dark"]).isRequired,isMobile:f().bool.isRequired,children:f().node.isRequired,footer:f().node},L.defaultProps={footer:null};const I=e=>{let{intl:r,appId:a,title:s,children:n,configureBeforeEnable:i,initialValues:t,validationSchema:l,onClose:h,onSettingsSave:f,enableAppLabel:q,enableAppHelp:A,learnMoreText:I,enableReinitialize:B,hideAppToggle:N}=e;const{courseId:D}=(0,m.useContext)(w.e),H=(0,v.v9)(C.vc),U=(0,v.v9)(C.Yu),V=(0,m.useRef)(null),[z,Y]=(0,m.useState)(!1),J=(0,P.tT)("courseApps",a),W=(0,v.I0)(),$=U===j.eE.IN_PROGRESS?"pending":"default",K=(0,R.dD)(),Q=K?"dark":"default";(0,m.useEffect)((()=>{U===j.eE.SUCCESSFUL&&(W((0,Z.Yn)({status:""})),h())}),[U]);const X=e=>{let{handleSubmit:r,errors:a}=e;return async e=>{await r(e),Object.keys(a).length>0&&(await Y(!0),V?.current.scrollIntoView?.())}},ee=J.documentationLinks?.learnMoreConfiguration&&(0,T.jsx)(o.ZP,{className:"text-primary-500",destination:J.documentationLinks.learnMoreConfiguration,target:"_blank",rel:"noreferrer noopener",children:I});return H===j.eE.SUCCESSFUL?(0,T.jsx)(b.J9,{initialValues:_({enabled:!!J?.enabled},t),validationSchema:x.Ry().shape(_({enabled:x.O7()},l)),onSubmit:async e=>{let r=!0;J.enabled!==e.enabled&&(r=await W((0,F.JU)(D,J.id,e.enabled))),f&&(r=r&&await f(e)),await Y(!r),!r&&V?.current.scrollIntoView()},enableReinitialize:B,children:e=>(0,T.jsx)(d.ZP,{onSubmit:X(e),children:(0,T.jsxs)(L,{title:s,isOpen:!0,onClose:h,variant:Q,isMobile:K,isFullscreenOnMobile:!0,intl:r,footer:(0,T.jsx)(u.Z,{labels:{default:r.formatMessage(E.save),pending:r.formatMessage(E.saving),complete:r.formatMessage(E.saved)},state:$,onClick:X(e)}),children:[z&&(0,T.jsxs)(c.Z,{variant:"danger",icon:p.Z,ref:V,children:[(0,T.jsx)(c.Z.Heading,{children:e.errors.enabled?.title||r.formatMessage(E.errorSavingTitle)}),e.errors.enabled?.message||r.formatMessage(E.errorSavingMessage)]}),!N&&(0,T.jsx)(y.Z,{id:`enable-${a}-toggle`,name:"enabled",onChange:r=>e.handleChange(r),onBlur:e.handleBlur,checked:e.values.enabled,label:(0,T.jsxs)("div",{className:"d-flex align-items-center",children:[q,e.values.enabled&&(0,T.jsx)(g.Z,{className:"ml-2",variant:"success","data-testid":"enable-badge",children:r.formatMessage(E.enabled)})]}),helpText:(0,T.jsxs)("div",{children:[(0,T.jsx)("p",{children:A}),(0,T.jsx)("span",{className:"py-3",children:ee})]})}),(e.values.enabled||i)&&n&&(0,T.jsx)(k.Z,{marginAdj:{default:0,sm:0}}),(0,T.jsx)(G,{formikProps:e,showForm:e.values.enabled||i,children:n})]})})}):(0,T.jsxs)(L,{intl:r,title:s,isOpen:!0,onClose:h,size:"sm",variant:Q,isMobile:K,isFullscreenOnMobile:!0,children:[H===j.eE.IN_PROGRESS&&(0,T.jsx)(M.Z,{}),H===j.eE.FAILED&&(0,T.jsx)(S.Z,{}),H===j.eE.DENIED&&(0,T.jsx)(O.Z,{})]})};I.propTypes={intl:s.gm.isRequired,title:f().string.isRequired,appId:f().string.isRequired,children:f().func,onSettingsSave:f().func,initialValues:f().shape({}),validationSchema:f().shape({}),onClose:f().func.isRequired,enableAppLabel:f().string.isRequired,enableAppHelp:f().string.isRequired,learnMoreText:f().string.isRequired,configureBeforeEnable:f().bool,enableReinitialize:f().bool,hideAppToggle:f().bool},I.defaultProps={children:null,onSettingsSave:null,initialValues:{},validationSchema:{},configureBeforeEnable:!1,enableReinitialize:!1,hideAppToggle:!1};const B=(0,n.Z)(I)},53630:(e,r,a)=>{a.r(r),a.d(r,{default:()=>f}),a(89526);var s=a(2652),n=a.n(s),i=a(58417),t=a(56549),l=a(48387),o=a(23768),d=a(56132),u=a(26672),c=a(58408),g=a(38349);const p=(0,a(93477).vU)({heading:{id:"course-authoring.pages-resources.ora.heading",defaultMessage:"Configure open response assessment"},ORASettingsHelpLink:{id:"course-authoring.pages-resources.ora.flex-peer-grading.link",defaultMessage:"Learn more about open response assessment settings"},enableFlexPeerGradeLabel:{id:"course-authoring.pages-resources.ora.flex-peer-grading.label",defaultMessage:"Flex Peer Grading"},enableFlexPeerGradeHelp:{id:"course-authoring.pages-resources.ora.flex-peer-grading.help",defaultMessage:"Turn on Flexible Peer Grading for all open response assessments in the course with peer grading."}});var b=a(67557);const h=e=>{let{intl:r,onClose:a}=e;const s="ora_settings",n=(0,d.tT)("courseApps",s),[t,l]=(0,c.Yc)("forceOnFlexiblePeerOpenassessments"),h=(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{children:r.formatMessage(p.heading)}),(0,b.jsx)("div",{className:"pt-3",children:(0,b.jsx)(o.ZP,{className:"text-primary-500 small",destination:n.documentationLinks?.learnMoreConfiguration,target:"_blank",rel:"noreferrer noopener",children:r.formatMessage(p.ORASettingsHelpLink)})})]});return(0,b.jsx)(g.Z,{appId:s,title:h,onClose:a,initialValues:{enableFlexiblePeerGrade:t},validationSchema:{enableFlexiblePeerGrade:i.O7()},onSettingsSave:e=>l(e.enableFlexiblePeerGrade),hideAppToggle:!0,children:e=>{let{values:a,handleChange:s,handleBlur:n}=e;return(0,b.jsx)(u.Z,{id:"enable-flexible-peer-grade",name:"enableFlexiblePeerGrade",label:r.formatMessage(p.enableFlexPeerGradeLabel),helpText:r.formatMessage(p.enableFlexPeerGradeHelp),onChange:s,onBlur:n,checked:a.enableFlexiblePeerGrade})}})};h.propTypes={intl:t.gm.isRequired,onClose:n().func.isRequired};const f=(0,l.Z)(h)}}]);
//# sourceMappingURL=630.ef951b660d86e9a109b9.js.map