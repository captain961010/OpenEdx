"use strict";(globalThis.webpackChunk_edx_frontend_app_course_authoring=globalThis.webpackChunk_edx_frontend_app_course_authoring||[]).push([[678],{38349:(e,a,r)=>{r.d(a,{Z:()=>B});var s=r(56549),n=r(48387),t=r(95381),l=r(34926),i=r(41857),o=r(23768),u=r(4138),c=r(77062),d=r(95765),p=r(40113),g=r(36284),b=r(6871),h=r(2652),f=r.n(h),m=r(89526),v=r(2984),j=r(58417),x=r(29519),y=r(87037),M=r(26672),S=r(72079),C=r(56132),O=r(88146),R=r(58408),Z=r(79138),P=r(22423),w=r(72999),E=r(26329),k=r(94488);const T=(0,r(93477).vU)({cancel:{id:"course-authoring.pages-resources.app-settings-modal.button.cancel",defaultMessage:"Cancel"},save:{id:"course-authoring.pages-resources.app-settings-modal.button.save",defaultMessage:"Save"},saving:{id:"course-authoring.pages-resources.app-settings-modal.button.saving",defaultMessage:"Saving"},saved:{id:"course-authoring.pages-resources.app-settings-modal.button.saved",defaultMessage:"Saved"},retry:{id:"course-authoring.pages-resources.app-settings-modal.button.retry",defaultMessage:"Retry"},enabled:{id:"course-authoring.pages-resources.app-settings-modal.badge.enabled",defaultMessage:"Enabled"},disabled:{id:"course-authoring.pages-resources.app-settings-modal.badge.disabled",defaultMessage:"Disabled"},errorSavingTitle:{id:"course-authoring.pages-resources.app-settings-modal.save-error.title",defaultMessage:"We couldn't apply your changes."},errorSavingMessage:{id:"course-authoring.pages-resources.app-settings-modal.save-error.message",defaultMessage:"Please check your entries and try again."}});var q=r(67557);function L(e,a){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);a&&(s=s.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),r.push.apply(r,s)}return r}function _(e){for(var a=1;a<arguments.length;a++){var r=null!=arguments[a]?arguments[a]:{};a%2?L(Object(r),!0).forEach((function(a){A(e,a,r[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):L(Object(r)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))}))}return e}function A(e,a,r){return(a=function(e){var a=function(e,a){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var s=r.call(e,"string");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof a?a:String(a)}(a))in e?Object.defineProperty(e,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[a]=r,e}const F=e=>{let{formikProps:a,children:r,showForm:s}=e;return r&&(0,q.jsx)(t.Z,{children:s?(0,q.jsx)(m.Fragment,{children:r(a)},"app-enabled"):(0,q.jsx)(m.Fragment,{},"app-disabled")})};F.propTypes={formikProps:f().object.isRequired,showForm:f().bool.isRequired,children:f().func},F.defaultProps={children:null};const I=e=>{let{intl:a,title:r,onClose:s,variant:n,isMobile:t,children:o,footer:u}=e;return(0,q.jsxs)(l.Z,{title:r,isOpen:!0,onClose:s,size:"lg",variant:n,hasCloseButton:t,isFullscreenOnMobile:!0,children:[(0,q.jsx)(l.Z.Header,{children:(0,q.jsx)(l.Z.Title,{"data-testid":"modal-title",children:r})}),(0,q.jsx)(l.Z.Body,{children:o}),(0,q.jsx)(l.Z.Footer,{className:"p-4",children:(0,q.jsxs)(i.Z,{children:[(0,q.jsx)(l.Z.CloseButton,{variant:"tertiary",children:a.formatMessage(T.cancel)}),u]})})]})};I.propTypes={intl:s.gm.isRequired,title:f().string.isRequired,onClose:f().func.isRequired,variant:f().oneOf(["default","dark"]).isRequired,isMobile:f().bool.isRequired,children:f().node.isRequired,footer:f().node},I.defaultProps={footer:null};const D=e=>{let{intl:a,appId:r,title:s,children:n,configureBeforeEnable:t,initialValues:l,validationSchema:i,onClose:h,onSettingsSave:f,enableAppLabel:L,enableAppHelp:A,learnMoreText:D,enableReinitialize:B,hideAppToggle:N}=e;const{courseId:H}=(0,m.useContext)(k.e),U=(0,v.v9)(Z.vc),z=(0,v.v9)(Z.Yu),V=(0,m.useRef)(null),[G,J]=(0,m.useState)(!1),W=(0,C.tT)("courseApps",r),Y=(0,v.I0)(),$=z===x.eE.IN_PROGRESS?"pending":"default",K=(0,R.dD)(),Q=K?"dark":"default";(0,m.useEffect)((()=>{z===x.eE.SUCCESSFUL&&(Y((0,P.Yn)({status:""})),h())}),[z]);const X=e=>{let{handleSubmit:a,errors:r}=e;return async e=>{await a(e),Object.keys(r).length>0&&(await J(!0),V?.current.scrollIntoView?.())}},ee=W.documentationLinks?.learnMoreConfiguration&&(0,q.jsx)(o.ZP,{className:"text-primary-500",destination:W.documentationLinks.learnMoreConfiguration,target:"_blank",rel:"noreferrer noopener",children:D});return U===x.eE.SUCCESSFUL?(0,q.jsx)(b.J9,{initialValues:_({enabled:!!W?.enabled},l),validationSchema:j.Ry().shape(_({enabled:j.O7()},i)),onSubmit:async e=>{let a=!0;W.enabled!==e.enabled&&(a=await Y((0,w.JU)(H,W.id,e.enabled))),f&&(a=a&&await f(e)),await J(!a),!a&&V?.current.scrollIntoView()},enableReinitialize:B,children:e=>(0,q.jsx)(u.ZP,{onSubmit:X(e),children:(0,q.jsxs)(I,{title:s,isOpen:!0,onClose:h,variant:Q,isMobile:K,isFullscreenOnMobile:!0,intl:a,footer:(0,q.jsx)(c.Z,{labels:{default:a.formatMessage(T.save),pending:a.formatMessage(T.saving),complete:a.formatMessage(T.saved)},state:$,onClick:X(e)}),children:[G&&(0,q.jsxs)(d.Z,{variant:"danger",icon:g.Z,ref:V,children:[(0,q.jsx)(d.Z.Heading,{children:e.errors.enabled?.title||a.formatMessage(T.errorSavingTitle)}),e.errors.enabled?.message||a.formatMessage(T.errorSavingMessage)]}),!N&&(0,q.jsx)(M.Z,{id:`enable-${r}-toggle`,name:"enabled",onChange:a=>e.handleChange(a),onBlur:e.handleBlur,checked:e.values.enabled,label:(0,q.jsxs)("div",{className:"d-flex align-items-center",children:[L,e.values.enabled&&(0,q.jsx)(p.Z,{className:"ml-2",variant:"success","data-testid":"enable-badge",children:a.formatMessage(T.enabled)})]}),helpText:(0,q.jsxs)("div",{children:[(0,q.jsx)("p",{children:A}),(0,q.jsx)("span",{className:"py-3",children:ee})]})}),(e.values.enabled||t)&&n&&(0,q.jsx)(E.Z,{marginAdj:{default:0,sm:0}}),(0,q.jsx)(F,{formikProps:e,showForm:e.values.enabled||t,children:n})]})})}):(0,q.jsxs)(I,{intl:a,title:s,isOpen:!0,onClose:h,size:"sm",variant:Q,isMobile:K,isFullscreenOnMobile:!0,children:[U===x.eE.IN_PROGRESS&&(0,q.jsx)(S.Z,{}),U===x.eE.FAILED&&(0,q.jsx)(y.Z,{}),U===x.eE.DENIED&&(0,q.jsx)(O.Z,{})]})};D.propTypes={intl:s.gm.isRequired,title:f().string.isRequired,appId:f().string.isRequired,children:f().func,onSettingsSave:f().func,initialValues:f().shape({}),validationSchema:f().shape({}),onClose:f().func.isRequired,enableAppLabel:f().string.isRequired,enableAppHelp:f().string.isRequired,learnMoreText:f().string.isRequired,configureBeforeEnable:f().bool,enableReinitialize:f().bool,hideAppToggle:f().bool},D.defaultProps={children:null,onSettingsSave:null,initialValues:{},validationSchema:{},configureBeforeEnable:!1,enableReinitialize:!1,hideAppToggle:!1};const B=(0,n.Z)(D)},65678:(e,a,r)=>{r.r(a),r.d(a,{default:()=>d}),r(89526);var s=r(2652),n=r.n(s),t=r(56549),l=r(48387),i=r(38349);const o=(0,r(93477).vU)({heading:{id:"course-authoring.pages-resources.calculator.heading",defaultMessage:"Configure calculator"},enableCalculatorLabel:{id:"course-authoring.pages-resources.calculator.enable-calculator.label",defaultMessage:"Calculator"},enableCalculatorHelp:{id:"course-authoring.pages-resources.calculator.enable-calculator.help",defaultMessage:"The calculator supports numbers, operators, constants,\n      functions, and other mathematical concepts. When enabled, an icon to\n      access the calculator appears on all pages in the body of your course."},enableCalculatorLink:{id:"course-authoring.pages-resources.calculator.enable-calculator.link",defaultMessage:"Learn more about the calculator"}});var u=r(67557);const c=e=>{let{intl:a,onClose:r}=e;return(0,u.jsx)(i.Z,{appId:"calculator",title:a.formatMessage(o.heading),enableAppHelp:a.formatMessage(o.enableCalculatorHelp),enableAppLabel:a.formatMessage(o.enableCalculatorLabel),learnMoreText:a.formatMessage(o.enableCalculatorLink),onClose:r})};c.propTypes={intl:t.gm.isRequired,onClose:n().func.isRequired};const d=(0,l.Z)(c)}}]);
//# sourceMappingURL=678.d633feefb6ea58eb0adf.js.map